<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GenAI Playground - Standalone Demo</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1e1b4b;
            --light: #f8fafc;
            --gray: #64748b;
            --border: #e2e8f0;
            --shadow: 0 10px 30px rgba(99, 102, 241, 0.15);
            --radius: 16px;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 20px 30px;
            margin-bottom: 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideDown 0.6s ease;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .logo-text {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tabs {
            display: flex;
            gap: 10px;
        }

        .tab-btn {
            padding: 12px 24px;
            background: transparent;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            font-family: 'DM Sans', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: var(--gray);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tab-btn:hover {
            background: rgba(99, 102, 241, 0.1);
            color: var(--primary);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: transparent;
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.3);
        }

        /* Content Area */
        .content {
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: var(--radius);
            padding: 40px;
            box-shadow: var(--shadow);
            min-height: 600px;
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        input, select, textarea {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-family: 'DM Sans', sans-serif;
            font-size: 15px;
            transition: all 0.3s ease;
            background: white;
        }

        textarea {
            font-family: 'Space Mono', monospace;
            resize: vertical;
            min-height: 150px;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .slider {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(to right, var(--primary) 0%, var(--secondary) 100%);
            outline: none;
            margin: 15px 0;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            border: 3px solid var(--primary);
        }

        .slider-value {
            font-family: 'Space Mono', monospace;
            color: var(--primary);
            font-weight: 700;
            font-size: 18px;
        }

        /* Buttons */
        .btn {
            padding: 14px 32px;
            border: none;
            border-radius: 10px;
            font-family: 'DM Sans', sans-serif;
            font-size: 15px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(99, 102, 241, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Response Card */
        .response-card {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.05), rgba(168, 85, 247, 0.05));
            border: 2px solid var(--border);
            border-radius: var(--radius);
            padding: 30px;
            margin-top: 30px;
            animation: slideUp 0.5s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .response-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .response-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
        }

        .response-content {
            font-family: 'Space Mono', monospace;
            background: white;
            padding: 25px;
            border-radius: 10px;
            line-height: 1.8;
            color: var(--dark);
            white-space: pre-wrap;
            border: 1px solid var(--border);
        }

        .response-meta {
            display: flex;
            gap: 20px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .meta-item {
            background: white;
            padding: 10px 20px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            font-weight: 600;
            color: var(--gray);
            border: 1px solid var(--border);
        }

        .meta-value {
            color: var(--primary);
            font-family: 'Space Mono', monospace;
        }

        /* Chat Messages */
        .chat-messages {
            max-height: 500px;
            overflow-y: auto;
            padding: 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.02), rgba(168, 85, 247, 0.02));
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 20px;
            padding: 18px 24px;
            border-radius: 12px;
            animation: messageSlide 0.4s ease;
            max-width: 80%;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(15px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .message.assistant {
            background: white;
            color: var(--dark);
            border: 2px solid var(--border);
            border-bottom-left-radius: 4px;
        }

        .message-role {
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 8px;
            opacity: 0.8;
        }

        .message-text {
            font-family: 'Space Mono', monospace;
            line-height: 1.6;
            font-size: 14px;
        }

        /* History Items */
        .history-list {
            display: grid;
            gap: 15px;
            margin-top: 20px;
        }

        .history-item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            border: 2px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .history-item:hover {
            border-color: var(--primary);
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.15);
            transform: translateX(5px);
        }

        .history-title {
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 8px;
        }

        .history-meta {
            font-size: 13px;
            color: var(--gray);
            display: flex;
            gap: 15px;
        }

        /* Comparison Grid */
        .comparison-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .comparison-card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }

        .comparison-header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 15px 20px;
            font-weight: 700;
            text-align: center;
        }

        .comparison-body {
            padding: 20px;
            font-family: 'Space Mono', monospace;
            font-size: 13px;
            line-height: 1.6;
            max-height: 300px;
            overflow-y: auto;
        }

        /* Dashboard */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(99, 102, 241, 0.3);
            animation: cardPop 0.5s ease;
            animation-fill-mode: backwards;
        }

        .stat-card:nth-child(1) { animation-delay: 0.1s; }
        .stat-card:nth-child(2) { animation-delay: 0.2s; }
        .stat-card:nth-child(3) { animation-delay: 0.3s; }
        .stat-card:nth-child(4) { animation-delay: 0.4s; }

        @keyframes cardPop {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .stat-value {
            font-size: 48px;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
        }

        .stat-label {
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
            opacity: 0.9;
            margin-top: 10px;
        }

        /* Loading Spinner */
        .spinner {
            border: 3px solid rgba(99, 102, 241, 0.2);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Utility */
        .hidden {
            display: none !important;
        }

        .text-center {
            text-align: center;
        }

        .mt-20 {
            margin-top: 20px;
        }

        .mb-20 {
            margin-bottom: 20px;
        }

        .flex {
            display: flex;
            gap: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                gap: 20px;
            }

            .tabs {
                flex-wrap: wrap;
                justify-content: center;
            }

            .tab-btn {
                font-size: 12px;
                padding: 10px 16px;
            }

            .content {
                padding: 20px;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .message {
                max-width: 100%;
            }
        }

        /* Feature Title */
        .feature-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .feature-subtitle {
            color: var(--gray);
            margin-bottom: 30px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo">
                <div class="logo-icon">üß†</div>
                <div class="logo-text">GenAI Playground</div>
            </div>
            <div class="tabs">
                <button class="tab-btn active" onclick="switchTab('playground')">Playground</button>
                <button class="tab-btn" onclick="switchTab('chat')">Chat</button>
                <button class="tab-btn" onclick="switchTab('history')">History</button>
                <button class="tab-btn" onclick="switchTab('comparison')">Compare</button>
                <button class="tab-btn" onclick="switchTab('dashboard')">Dashboard</button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Tab 1: Prompt Playground -->
            <div id="playground" class="tab-content active">
                <h2 class="feature-title">Prompt Playground</h2>
                <p class="feature-subtitle">Experiment with different models and prompts</p>

                <div class="form-group">
                    <label>Select Model</label>
                    <select id="pg-model">
                        <option value="gpt-4">GPT-4 (OpenAI)</option>
                        <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo (OpenAI)</option>
                        <option value="claude-3-opus">Claude 3 Opus (Anthropic)</option>
                        <option value="mistral-7b">Mistral 7B (Hugging Face)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Temperature: <span class="slider-value" id="pg-temp-value">0.70</span></label>
                    <input type="range" class="slider" id="pg-temp" min="0" max="2" step="0.1" value="0.7" oninput="updateSlider('pg-temp')">
                </div>

                <div class="form-group">
                    <label>Max Tokens: <span class="slider-value" id="pg-tokens-value">1000</span></label>
                    <input type="range" class="slider" id="pg-tokens" min="100" max="4000" step="100" value="1000" oninput="updateSlider('pg-tokens')">
                </div>

                <div class="form-group">
                    <label>Your Prompt</label>
                    <textarea id="pg-prompt" placeholder="Enter your prompt here..."></textarea>
                </div>

                <div class="flex">
                    <button class="btn btn-primary" onclick="executePrompt()">
                        <span id="pg-btn-text">Execute</span>
                        <span id="pg-spinner" class="spinner hidden"></span>
                    </button>
                    <button class="btn btn-secondary" onclick="clearPlayground()">Clear</button>
                </div>

                <div id="pg-response" class="hidden"></div>
            </div>

            <!-- Tab 2: Chat Interface -->
            <div id="chat" class="tab-content">
                <h2 class="feature-title">Chat Interface</h2>
                <p class="feature-subtitle">Have multi-turn conversations with AI</p>

                <div class="form-group">
                    <label>Select Model</label>
                    <select id="chat-model">
                        <option value="gpt-4">GPT-4</option>
                        <option value="gpt-3.5-turbo" selected>GPT-3.5 Turbo</option>
                        <option value="claude-3-opus">Claude 3 Opus</option>
                    </select>
                </div>

                <div class="chat-messages" id="chat-messages">
                    <div class="text-center" style="color: var(--gray); padding: 40px;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üí¨</div>
                        <p>Start a conversation by typing a message below</p>
                    </div>
                </div>

                <div class="form-group">
                    <textarea id="chat-input" placeholder="Type your message..." rows="3"></textarea>
                </div>

                <div class="flex">
                    <button class="btn btn-primary" onclick="sendMessage()">
                        <span id="chat-btn-text">Send</span>
                        <span id="chat-spinner" class="spinner hidden"></span>
                    </button>
                    <button class="btn btn-secondary" onclick="clearChat()">Clear Chat</button>
                </div>
            </div>

            <!-- Tab 3: Conversation History -->
            <div id="history" class="tab-content">
                <h2 class="feature-title">Conversation History</h2>
                <p class="feature-subtitle">View and manage your past conversations</p>

                <div id="history-list" class="history-list"></div>
            </div>

            <!-- Tab 4: Response Comparison -->
            <div id="comparison" class="tab-content">
                <h2 class="feature-title">Response Comparison</h2>
                <p class="feature-subtitle">Compare responses from multiple models</p>

                <div class="form-group">
                    <label>Your Prompt</label>
                    <textarea id="comp-prompt" placeholder="Enter a prompt to compare across models..."></textarea>
                </div>

                <button class="btn btn-primary" onclick="compareModels()">
                    <span id="comp-btn-text">Compare Models</span>
                    <span id="comp-spinner" class="spinner hidden"></span>
                </button>

                <div id="comp-results" class="hidden"></div>
            </div>

            <!-- Tab 5: Dashboard -->
            <div id="dashboard" class="tab-content">
                <h2 class="feature-title">Evaluation Dashboard</h2>
                <p class="feature-subtitle">Track your AI experimentation metrics</p>

                <div class="dashboard-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="stat-executions">0</div>
                        <div class="stat-label">Executions</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-chats">0</div>
                        <div class="stat-label">Chat Messages</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-comparisons">0</div>
                        <div class="stat-label">Comparisons</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="stat-tokens">0</div>
                        <div class="stat-label">Total Tokens</div>
                    </div>
                </div>

                <button class="btn btn-danger" onclick="clearAllData()">Clear All Data</button>
            </div>
        </div>
    </div>

    <script>
        // Data Storage
        let conversationHistory = JSON.parse(localStorage.getItem('conversations') || '[]');
        let chatMessages = JSON.parse(localStorage.getItem('chatMessages') || '[]');
        let stats = JSON.parse(localStorage.getItem('stats') || '{"executions": 0, "chats": 0, "comparisons": 0, "tokens": 0}');

        // Initialize
        updateDashboard();
        loadHistory();
        loadChat();

        // Tab Switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'history') loadHistory();
            if (tabName === 'dashboard') updateDashboard();
            if (tabName === 'chat') loadChat();
        }

        // Slider Updates
        function updateSlider(sliderId) {
            const slider = document.getElementById(sliderId);
            const valueSpan = document.getElementById(sliderId + '-value');
            valueSpan.textContent = slider.value;
        }

        // Mock API Call
        function mockAPICall(prompt, model) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const responses = [
                        `This is a simulated response from ${model}. In a real implementation, this would connect to actual AI APIs like OpenAI, Anthropic, or Hugging Face.\n\nYour prompt was: "${prompt.substring(0, 100)}..."\n\nThis demo showcases all the UI features and functionality of the GenAI Playground. To connect to real AI models, you would need to add API keys and implement the actual API calls.`,
                        `Mock response from ${model}:\n\nI understand you're asking about: "${prompt.substring(0, 80)}..."\n\nThis is a demonstration of how the playground works. The actual implementation would use real AI models to generate meaningful responses based on your prompts.`,
                        `Response generated by ${model}:\n\nBased on your input regarding "${prompt.substring(0, 70)}..."\n\nThis standalone demo shows all 5 features working together with simulated data. Connect real APIs to unlock full AI capabilities!`
                    ];
                    
                    const response = responses[Math.floor(Math.random() * responses.length)];
                    const tokens = Math.floor(Math.random() * 200) + 50;
                    const latency = Math.floor(Math.random() * 1000) + 500;
                    
                    resolve({ response, tokens, latency });
                }, Math.random() * 1500 + 500);
            });
        }

        // Prompt Playground
        async function executePrompt() {
            const prompt = document.getElementById('pg-prompt').value;
            if (!prompt.trim()) return alert('Please enter a prompt');

            const model = document.getElementById('pg-model').value;
            const temp = document.getElementById('pg-temp').value;
            const tokens = document.getElementById('pg-tokens').value;

            // Show loading
            document.getElementById('pg-btn-text').classList.add('hidden');
            document.getElementById('pg-spinner').classList.remove('hidden');
            document.querySelector('.btn-primary').disabled = true;

            try {
                const result = await mockAPICall(prompt, model);
                
                // Update stats
                stats.executions++;
                stats.tokens += result.tokens;
                saveStats();

                // Save to history
                conversationHistory.unshift({
                    id: Date.now(),
                    prompt: prompt,
                    response: result.response,
                    model: model,
                    temperature: temp,
                    tokens: result.tokens,
                    latency: result.latency,
                    timestamp: new Date().toISOString()
                });
                localStorage.setItem('conversations', JSON.stringify(conversationHistory));

                // Display response
                displayResponse(result.response, result.tokens, result.latency, model);
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                // Hide loading
                document.getElementById('pg-btn-text').classList.remove('hidden');
                document.getElementById('pg-spinner').classList.add('hidden');
                document.querySelector('.btn-primary').disabled = false;
            }
        }

        function displayResponse(content, tokens, latency, model) {
            const responseDiv = document.getElementById('pg-response');
            responseDiv.className = 'response-card';
            responseDiv.innerHTML = `
                <div class="response-header">
                    <div class="response-title">Response</div>
                    <button class="btn btn-secondary" onclick="copyToClipboard('${content.replace(/'/g, "\\'")}')">Copy</button>
                </div>
                <div class="response-content">${content}</div>
                <div class="response-meta">
                    <div class="meta-item">‚è±Ô∏è Latency: <span class="meta-value">${latency}ms</span></div>
                    <div class="meta-item">üéØ Tokens: <span class="meta-value">${tokens}</span></div>
                    <div class="meta-item">ü§ñ Model: <span class="meta-value">${model}</span></div>
                </div>
            `;
        }

        function clearPlayground() {
            document.getElementById('pg-prompt').value = '';
            document.getElementById('pg-response').className = 'hidden';
        }

        // Chat Interface
        async function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (!message) return;

            const model = document.getElementById('chat-model').value;

            // Add user message
            addChatMessage('user', message);
            input.value = '';

            // Show loading
            document.getElementById('chat-btn-text').classList.add('hidden');
            document.getElementById('chat-spinner').classList.remove('hidden');

            try {
                const result = await mockAPICall(message, model);
                
                // Add assistant message
                addChatMessage('assistant', result.response);

                // Update stats
                stats.chats += 2;
                stats.tokens += result.tokens;
                saveStats();
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('chat-btn-text').classList.remove('hidden');
                document.getElementById('chat-spinner').classList.add('hidden');
            }
        }

        function addChatMessage(role, content) {
            const messagesDiv = document.getElementById('chat-messages');
            
            // Clear welcome message
            if (chatMessages.length === 0) {
                messagesDiv.innerHTML = '';
            }

            const messageEl = document.createElement('div');
            messageEl.className = `message ${role}`;
            messageEl.innerHTML = `
                <div class="message-role">${role === 'user' ? 'You' : 'AI'}</div>
                <div class="message-text">${content}</div>
            `;
            messagesDiv.appendChild(messageEl);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;

            // Save to storage
            chatMessages.push({ role, content, timestamp: Date.now() });
            localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
        }

        function loadChat() {
            const messagesDiv = document.getElementById('chat-messages');
            if (chatMessages.length === 0) return;

            messagesDiv.innerHTML = '';
            chatMessages.forEach(msg => {
                const messageEl = document.createElement('div');
                messageEl.className = `message ${msg.role}`;
                messageEl.innerHTML = `
                    <div class="message-role">${msg.role === 'user' ? 'You' : 'AI'}</div>
                    <div class="message-text">${msg.content}</div>
                `;
                messagesDiv.appendChild(messageEl);
            });
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function clearChat() {
            if (confirm('Clear all chat messages?')) {
                chatMessages = [];
                localStorage.setItem('chatMessages', JSON.stringify(chatMessages));
                document.getElementById('chat-messages').innerHTML = `
                    <div class="text-center" style="color: var(--gray); padding: 40px;">
                        <div style="font-size: 48px; margin-bottom: 20px;">üí¨</div>
                        <p>Start a conversation by typing a message below</p>
                    </div>
                `;
            }
        }

        // History
        function loadHistory() {
            const historyDiv = document.getElementById('history-list');
            
            if (conversationHistory.length === 0) {
                historyDiv.innerHTML = `
                    <div class="text-center" style="color: var(--gray); padding: 60px;">
                        <div style="font-size: 64px; margin-bottom: 20px;">üìú</div>
                        <h3>No conversation history yet</h3>
                        <p>Your executed prompts will appear here</p>
                    </div>
                `;
                return;
            }

            historyDiv.innerHTML = conversationHistory.map(conv => `
                <div class="history-item" onclick="viewHistory(${conv.id})">
                    <div class="history-title">${conv.prompt.substring(0, 100)}...</div>
                    <div class="history-meta">
                        <span>ü§ñ ${conv.model}</span>
                        <span>üéØ ${conv.tokens} tokens</span>
                        <span>‚è±Ô∏è ${conv.latency}ms</span>
                        <span>üìÖ ${new Date(conv.timestamp).toLocaleString()}</span>
                    </div>
                </div>
            `).join('');
        }

        function viewHistory(id) {
            const conv = conversationHistory.find(c => c.id === id);
            if (conv) {
                alert(`Prompt: ${conv.prompt}\n\nResponse: ${conv.response}`);
            }
        }

        // Comparison
        async function compareModels() {
            const prompt = document.getElementById('comp-prompt').value;
            if (!prompt.trim()) return alert('Please enter a prompt');

            const models = ['gpt-4', 'gpt-3.5-turbo', 'claude-3-opus'];

            // Show loading
            document.getElementById('comp-btn-text').classList.add('hidden');
            document.getElementById('comp-spinner').classList.remove('hidden');

            try {
                const results = await Promise.all(
                    models.map(model => mockAPICall(prompt, model))
                );

                // Update stats
                stats.comparisons++;
                stats.tokens += results.reduce((sum, r) => sum + r.tokens, 0);
                saveStats();

                // Display results
                const resultsDiv = document.getElementById('comp-results');
                resultsDiv.className = 'comparison-grid mt-20';
                resultsDiv.innerHTML = models.map((model, i) => `
                    <div class="comparison-card">
                        <div class="comparison-header">${model}</div>
                        <div class="comparison-body">
                            ${results[i].response}
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border);">
                                <strong>Latency:</strong> ${results[i].latency}ms<br>
                                <strong>Tokens:</strong> ${results[i].tokens}
                            </div>
                        </div>
                    </div>
                `).join('');
            } catch (error) {
                alert('Error: ' + error.message);
            } finally {
                document.getElementById('comp-btn-text').classList.remove('hidden');
                document.getElementById('comp-spinner').classList.add('hidden');
            }
        }

        // Dashboard
        function updateDashboard() {
            document.getElementById('stat-executions').textContent = stats.executions;
            document.getElementById('stat-chats').textContent = stats.chats;
            document.getElementById('stat-comparisons').textContent = stats.comparisons;
            document.getElementById('stat-tokens').textContent = stats.tokens.toLocaleString();
        }

        function saveStats() {
            localStorage.setItem('stats', JSON.stringify(stats));
            updateDashboard();
        }

        function clearAllData() {
            if (confirm('This will delete all your data. Are you sure?')) {
                localStorage.clear();
                conversationHistory = [];
                chatMessages = [];
                stats = {executions: 0, chats: 0, comparisons: 0, tokens: 0};
                updateDashboard();
                loadHistory();
                loadChat();
                alert('All data cleared!');
            }
        }

        // Utilities
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text);
            alert('Copied to clipboard!');
        }
    </script>
</body>
</html>
